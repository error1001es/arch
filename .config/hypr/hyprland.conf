monitor=,highres@highrr,auto,1

exec-once = waybar
exec-once = swaybg -i ~/Pictures/wallpaper.jpg
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP

# тёмная тема в приложухах
exec-once = gsettings set org.gnome.desktop.interface color-scheme "prefer-dark"
env = QT_QPA_PLATFORMTHEME,qt6ct
env = GTK_THEME, Adwaita-dark

windowrule = match:class google-chrome, workspace 1
windowrule = match:class jetbrains-phpstorm, workspace 2
windowrule = match:class steam, workspace 3
windowrule = match:content game, workspace 3


# Dashboard (Сверху слева)
windowrule = match:class dashboard, workspace 9
windowrule = match:class dashboard, float true
windowrule = match:class dashboard, move 17 70
windowrule = match:class dashboard, size 1000 500

# v2rayN (Справа снизу)
windowrule = match:class v2rayN, workspace 9
windowrule = match:class v2rayN, float true
windowrule = match:class v2rayN, move 1543 923
windowrule = match:class v2rayN, size 1000 500

# btop (Снизу во всю ширину)
#windowrule = match:class sysmon, workspace 9
#windowrule = match:class sysmon, float true
#windowrule = match:class sysmon, move 17 640
#windowrule = match:class sysmon, size 2530 783

# запуск впн на 4 рабочем столе
# Запуск дэшборда при старте
exec-once = ~/.config/hypr/scripts/dashboard.sh
exec-once = v2rayn
#exec-once = ~/.config/hypr/scripts/sysmon.sh

# курсор
env = HYPRCURSOR_THEME,Bibata-Modern-Ice
env = HYPRCURSOR_SIZE,24
env = XCURSOR_THEME,Bibata-Modern-Ice
env = XCURSOR_SIZE,24

# смена языка на клаве + сенса мышки
input {
    kb_layout = us,ru
    kb_options = grp:alt_shift_toggle

    accel_profile = flat
    sensitivity = -0.6
    follow_mouse = 1
    mouse_refocus = true
    #force_no_accel = true
}

cursor {
    inactive_timeout = 3 # курсор исчезнет через 1 секунду бездействия
}

plugin {
    hyprcursor {
        enabled = true
        nearest = true # Ставим false для плавного сглаживания
    }
}

# правила для 1 активного окна
#workspace = w[v1], gapsout:0, gapsin:0, rounding:0, border:0

general {
    #gaps_in = 5
    #gaps_out = 10
    #border_size = 2
    #col.active_border = rgba(aaaaaaaa)

    gaps_in = 10
    gaps_out = 15
    border_size = 2
    col.inactive_border = 0xaa565f89
    col.active_border = 0xaa7aa2f7

    allow_tearing = true
    layout = dwindle

    resize_on_border = true
    extend_border_grab_area = 20
    hover_icon_on_border = true
}

dwindle {
    pseudotile = true
    preserve_split = true
}

master {
    new_status = master
}

decoration {
    rounding = 8
}

animations {
    enabled = false
}

$mainMod = SUPER
$terminal = kitty

bindr = SUPER, SUPER_L, exec, pkill rofi || rofi -show drun
bind = $mainMod, R, exec, rofi -show drun
bind = $mainMod SHIFT, R, exec, pkill waybar && hyprctl dispatch exec waybar

bind = CONTROL_ALT, T, exec, $terminal
bind = CTRL ALT, A, exec, SDL_VIDEO_X11_VISUALID=0 ffplay -f lavfi -i "color=c=black:s=2560x1440" -fs -noborder -hide_banner -window_title "BLACKOUT"

bind = ALT, Q, killactive,
bind = $mainMod, Q, killactive,
bind = $mainMod, M, exit,
bind = $mainMod, E, exec, dolphin
bind = $mainMod, F, fullscreen,
bind = $mainMod SHIFT, F, togglefloating

bind = $mainMod SHIFT, S, exec, grim -g "$(slurp)" - | wl-copy
bind = $mainMod, Print, exec, grim - | wl-copy

bind = ALT, Tab, workspace, previous

# --- Рабочие столы ---

# Переключение (Super + 1..4)
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 9, workspace, 9

# Перемещение окна на другой стол (Super + Shift + 1..4)
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 9, movetoworkspace, 9

# Скролл мышкой по столам
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up, workspace, e-1

# Перемещение фокуса (Super + стрелки)
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d

# Перемещение окон местами
bind = SHIFT, left,  swapwindow, l
bind = SHIFT, right, swapwindow, r
bind = SHIFT, up,    swapwindow, u
bind = SHIFT, down,  swapwindow, d

# Перемещение окна: Super + ЛКМ
bindm = SUPER, mouse:272, movewindow
# Изменение размера: Super + ПКМ
bindm = SUPER, mouse:273, resizewindow
